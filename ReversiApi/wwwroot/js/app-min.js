"use strict";var Reversi=function(){var e,n=8,t=8,o={id:0,color:"white"},a={id:1,color:"white"},i={id:2,color:"black"},r=function(){document.getElementById("board").innerHTML="";for(var r=document.createElement("table"),s=0;s<t;s++){var d=document.createElement("tr");r.appendChild(d);for(var u=0;u<n;u++){var m=document.createElement("td"),p=document.createElement("span");p.classList.add("stone"),p.classList.add("animate");var f=void 0;switch(e[s][u]){case 0:p.style.visibility="hidden",f=o;break;case 1:f=a;break;case 2:p.classList.add("black"),f=i}d.appendChild(m),m.appendChild(p),e[s][u]=c(p,f),p.classList.toggle("animate"),l(m,s,u)}}document.getElementById("board").appendChild(r)},s=function(){setInterval(function(){Reversi.model.poll().then(function(n){e=JSON.parse(n.response.board),n.response.onSet}).then(function(){r()})},1500)},c=function(e,n){return{state:n,elem:e}},l=function(e,n,t){e.onclick=function(e){Reversi.model.move(n,t)}};return{init:function(){Reversi.model.init().then(function(n){e=JSON.parse(n.response.board)}).then(function(){r()}).then(function(){s()})}}}();Reversi.model=function(){var e={gametoken:"eCl6yJH1ykiHcec7qRyBQ==",turnUrl:null,env:"production"},n=function(){return"development"==e.env?new Promise(function(e,n){e({name:"load_board",response:response})}):new Promise(function(n,t){$.ajax({url:"https://localhost:44375/api/game/"+e.gametoken,method:"GET",success:function(e){n({name:"load_board",response:e})},error:function(e){t({name:"load_board",response:e})}})})};return{init:function(t,o){return e.env=o,n()},move:function(n,t){return new Promise(function(o,a){$.ajax({url:"https://localhost:44375/api/game/move",method:"PUT",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({moveX:n,moveY:t,GameToken:e.gametoken.toString()}),success:function(e){console.log(e),o({name:"setmove",response:e})}})})},poll:n}}();